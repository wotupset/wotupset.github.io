<html>
<head>
<script
src="https://code.jquery.com/jquery-3.6.3.slim.js"
integrity="sha256-DKU1CmJ8kBuEwumaLuh9Tl/6ZB6jzGOBV/5YpNE2BWc="
crossorigin="anonymous"></script>

<style>
</style>
<script>
try{
  $(document).ready(function() {
    console.log("document ready");
  });
}
catch(err){}
finally{}

document.addEventListener("DOMContentLoaded",function(e){
	console.log("DOMContentLoaded");
  poi();
  poi211001();
});
function poi211001(){
  var aa=$("#aa01").attr('href');
  var ii=$("#box01").after(aa);
	console.log(ii);  
  
}

//從檔案讀取
function poi(){
	//console.log("poi");
  var ii = document.getElementById("ii01");
  ii.addEventListener("change",function(e){
    console.log("change");
    //console.log( ii.files[0] );
    //
    var file=ii.files[0];
    var reader  = new FileReader();
    reader.addEventListener("load",function(e){
      console.log("load");
      //console.log( this.result );
      poi2( this.result );
      
    });
    if(file){
      //reader.readAsDataURL(file);
      //reader.readAsBinaryString(file);
      //reader.readAsArrayBuffer(file);
      reader.readAsText(file);
      
    }
  });

  

}//poi()

function poi2(a){
  //console.log( a );
	var data=a;
	//
	var xml_node = $(data);
	var aa = xml_node.find('item');
	
	//console.log( aa.length,aa );
	//$('#box01').append('<br/>'+aa.length );
  var cc=0;
  for (i = 0; i < aa.length; i++) {
    let aaa= $(aa[i]).find('title');
    //aaa=$(aaa[0]);
    //console.log( aaa[0].innerText );
    cc++;
    FFF='';
    FFF=aaa[0].innerText;
    $('#box01').append('<br/>'+FFF );
  }
  $('#box01').append('<br/>'+cc+'個項目');
  
	
}//poi2()
</script>
</head>
<body>
<input id="ii01" type="file" accept=".xml,.rss">
<div id='box01'>
讀取nyaa的XML
<a id='aa01' href="https://sukebei.nyaa.si/?page=rss&q=2302+Watermark&c=1_1&f=0">RSS</a>
</div>

</body>
</html>
